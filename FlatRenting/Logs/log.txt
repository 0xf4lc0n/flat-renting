2023-01-03 10:23:13.401 +01:00 [FTL] Application terminated unexpectedly
System.ArgumentException: 'AddDbContext' was called with configuration, but the context type 'FlatRentingContext' only declares a parameterless constructor. This means that the configuration passed to 'AddDbContext' will never be used. If configuration is passed to 'AddDbContext', then 'FlatRentingContext' should declare a constructor that accepts a DbContextOptions<FlatRentingContext> and must pass it to the base constructor for DbContext.
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CheckContextConstructors[TContext]()
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.AddDbContext[TContextService,TContextImplementation](IServiceCollection serviceCollection, Action`2 optionsAction, ServiceLifetime contextLifetime, ServiceLifetime optionsLifetime)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.AddDbContext[TContextService,TContextImplementation](IServiceCollection serviceCollection, Action`1 optionsAction, ServiceLifetime contextLifetime, ServiceLifetime optionsLifetime)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.AddDbContext[TContext](IServiceCollection serviceCollection, Action`1 optionsAction, ServiceLifetime contextLifetime, ServiceLifetime optionsLifetime)
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 20
2023-01-03 10:25:22.238 +01:00 [FTL] Application terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: FlatRenting.Interfaces.IUserRepository Lifetime: Singleton ImplementationType: FlatRenting.Data.Repositories.UserRepository': Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.IUserRepository'.) (Error while validating the service descriptor 'ServiceType: FlatRenting.Interfaces.IAnnoucementRepository Lifetime: Singleton ImplementationType: FlatRenting.Data.Repositories.AnnoucementRepository': Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.IAnnoucementRepository'.) (Error while validating the service descriptor 'ServiceType: FlatRenting.Interfaces.ICommentRepository Lifetime: Singleton ImplementationType: FlatRenting.Data.Repositories.CommentRepository': Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.ICommentRepository'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: FlatRenting.Interfaces.IUserRepository Lifetime: Singleton ImplementationType: FlatRenting.Data.Repositories.UserRepository': Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.IUserRepository'.
 ---> System.InvalidOperationException: Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.IUserRepository'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitScopeCache(ServiceCallSite scopedCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitConstructor(ConstructorCallSite constructorCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateCallSite(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 33
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: FlatRenting.Interfaces.IAnnoucementRepository Lifetime: Singleton ImplementationType: FlatRenting.Data.Repositories.AnnoucementRepository': Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.IAnnoucementRepository'.
 ---> System.InvalidOperationException: Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.IAnnoucementRepository'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitScopeCache(ServiceCallSite scopedCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitConstructor(ConstructorCallSite constructorCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateCallSite(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: FlatRenting.Interfaces.ICommentRepository Lifetime: Singleton ImplementationType: FlatRenting.Data.Repositories.CommentRepository': Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.ICommentRepository'.
 ---> System.InvalidOperationException: Cannot consume scoped service 'FlatRenting.Data.FlatRentingContext' from singleton 'FlatRenting.Interfaces.ICommentRepository'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitScopeCache(ServiceCallSite scopedCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.VisitConstructor(ConstructorCallSite constructorCallSite, CallSiteValidatorState state)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateCallSite(ServiceCallSite callSite)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2023-01-03 10:26:08.920 +01:00 [WRN] Overriding address(es) 'https://localhost:7039, http://localhost:5110'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2023-01-03 10:28:40.810 +01:00 [INF] HTTP GET /swagger responded 301 in 23.6259 ms
2023-01-03 10:28:41.244 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 285.6350 ms
2023-01-03 10:28:41.458 +01:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 67.1729 ms
2023-01-03 10:28:41.458 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 77.7631 ms
2023-01-03 10:28:41.563 +01:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 181.1503 ms
2023-01-03 10:28:42.042 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 0.1893 ms
2023-01-03 10:28:42.352 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 191.3122 ms
2023-01-03 10:28:51.839 +01:00 [ERR] HTTP POST /api/Auth/register responded 500 in 380.4713 ms
System.InvalidOperationException: Unable to resolve service for type 'Serilog.ILogger' while attempting to activate 'FlatRenting.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method3(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-01-03 10:28:51.878 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Serilog.ILogger' while attempting to activate 'FlatRenting.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method3(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-01-03 10:29:48.373 +01:00 [INF] HTTP GET /swagger responded 301 in 16.8230 ms
2023-01-03 10:29:48.612 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 163.6440 ms
2023-01-03 10:29:49.058 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 285.1359 ms
2023-01-03 10:29:49.079 +01:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 36.9798 ms
2023-01-03 10:29:49.177 +01:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 134.9379 ms
2023-01-03 10:29:49.494 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 0.1623 ms
2023-01-03 10:29:49.782 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 137.8413 ms
2023-01-03 10:29:58.003 +01:00 [INF] Register endpoint
2023-01-03 10:29:58.005 +01:00 [INF] HTTP POST /api/Auth/register responded 200 in 263.1204 ms
2023-01-03 12:32:21.043 +01:00 [INF] HTTP GET /swagger responded 301 in 32.2768 ms
2023-01-03 12:32:21.454 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 263.4138 ms
2023-01-03 12:32:21.848 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 322.0713 ms
2023-01-03 12:32:21.932 +01:00 [INF] HTTP GET /swagger/swagger-ui-standalone-preset.js responded 200 in 67.1958 ms
2023-01-03 12:32:21.949 +01:00 [INF] HTTP GET /swagger/swagger-ui-bundle.js responded 200 in 96.9089 ms
2023-01-03 12:32:22.394 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 1.6133 ms
2023-01-03 12:32:22.781 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 223.5709 ms
2023-01-03 12:32:51.343 +01:00 [INF] Registering user: {"FirstName":"Piotr","LastName":"Makowiecki","Login":"pMakov","Email":"pmakov@gmail.com","Password":"Paswordzisko123!","Phone":"555222111","$type":"RegisterDto"}
2023-01-03 12:32:57.156 +01:00 [ERR] An error occurred using the connection to database 'flat-rental' on server ''.
2023-01-03 12:33:53.883 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'FlatRenting.Data.FlatRentingContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|208_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|28_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|45_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|208_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|28_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|45_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2023-01-03 12:33:54.394 +01:00 [ERR] An exception has been raised that is likely due to a transient failure.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 127.0.0.1:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|281_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|208_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|28_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|45_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.AddUser(RegisterDto user) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 15
   at FlatRenting.Controllers.AuthController.Register(RegisterDto registerDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 20
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 12:33:54.609 +01:00 [ERR] HTTP POST /api/Auth/register responded 500 in 63901.4482 ms
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-01-03 12:33:54.626 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-01-03 12:33:54.641 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-01-03 12:33:54.646 +01:00 [ERR] Connection id "0HMNDFOMFEJD5", Request id "0HMNDFOMFEJD5:00000021": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2023-01-03 12:34:04.730 +01:00 [INF] Registering user: {"FirstName":"string","LastName":"string","Login":"string","Email":"string","Password":"string","Phone":"string","$type":"RegisterDto"}
2023-01-03 12:34:08.196 +01:00 [INF] HTTP POST /api/Auth/register responded 200 in 3474.5245 ms
2023-01-03 12:35:27.892 +01:00 [INF] Registering user: {"FirstName":"Piotr","LastName":"Makowiecki","Login":"PMakov","Email":"pmakov@gmail.com","Password":"Passwordzisko123!","Phone":"555222111","$type":"RegisterDto"}
2023-01-03 12:35:27.993 +01:00 [INF] HTTP POST /api/Auth/register responded 200 in 103.7118 ms
2023-01-03 12:35:58.441 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 129.9851 ms
2023-01-03 12:36:06.121 +01:00 [ERR] Cannot get user with login 'PMakov'
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'PMakov'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 12:36:06.262 +01:00 [ERR] HTTP POST /api/Auth/login responded 500 in 568.7152 ms
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-01-03 12:36:06.271 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-01-03 12:36:06.283 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-01-03 12:36:06.285 +01:00 [ERR] Connection id "0HMNDFOMFEJD5", Request id "0HMNDFOMFEJD5:00000029": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2023-01-03 12:40:39.476 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 320.0361 ms
2023-01-03 12:40:39.634 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 12.1461 ms
2023-01-03 12:40:40.597 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 68.9787 ms
2023-01-03 12:40:41.123 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 368.3776 ms
2023-01-03 12:41:19.183 +01:00 [ERR] Cannot get user with login 'strisng'
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'strisng'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 12:41:19.436 +01:00 [ERR] HTTP POST /api/Auth/login responded 500 in 20143.8847 ms
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-01-03 12:41:19.457 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-01-03 12:41:19.471 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-01-03 12:41:19.476 +01:00 [ERR] Connection id "0HMNDFTAN88BI", Request id "0HMNDFTAN88BI:0000001B": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2023-01-03 12:41:36.393 +01:00 [ERR] Cannot get user with login 'strisng'
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'strisng'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 12:41:46.312 +01:00 [ERR] HTTP POST /api/Auth/login responded 500 in 19698.3687 ms
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-01-03 12:41:46.323 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-01-03 12:41:46.336 +01:00 [WRN] The response has already started, the error page middleware will not be executed.
2023-01-03 12:41:46.339 +01:00 [ERR] Connection id "0HMNDFTAN88BI", Request id "0HMNDFTAN88BI:0000001D": An unhandled exception was thrown by the application.
System.InvalidOperationException: Headers are read-only, response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.ThrowHeadersReadOnlyException()
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.Microsoft.AspNetCore.Http.IHeaderDictionary.set_ContentType(StringValues value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_ContentType(String value)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 32
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2023-01-03 12:48:04.137 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 274.0135 ms
2023-01-03 12:48:04.327 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 38.9521 ms
2023-01-03 12:48:04.877 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 2.1059 ms
2023-01-03 12:48:05.146 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 224.6194 ms
2023-01-03 12:48:12.398 +01:00 [ERR] Cannot get user with login 'strsadasdasing'
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'strsadasdasing'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 12:48:12.447 +01:00 [ERR] HTTP POST /api/Auth/login responded 500 in 2852.4841 ms
2023-01-03 12:49:22.021 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 277.7377 ms
2023-01-03 12:49:23.489 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 216.9689 ms
2023-01-03 12:49:53.949 +01:00 [ERR] Cannot get user with login 'string'
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'string'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 12:49:54.014 +01:00 [ERR] HTTP POST /api/Auth/login responded 500 in 2632.2451 ms
2023-01-03 12:52:04.607 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 298.3845 ms
2023-01-03 12:52:05.754 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 245.5334 ms
2023-01-03 12:52:26.374 +01:00 [ERR] Cannot login user with data {"Login":"stridasdsadasng","Password":"string","$type":"LoginDto"}
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'stridasdsadasng'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 29
2023-01-03 12:52:26.449 +01:00 [INF] HTTP POST /api/Auth/login responded 400 in 2367.2560 ms
2023-01-03 12:55:09.267 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 639.0223 ms
2023-01-03 12:55:10.519 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 266.4782 ms
2023-01-03 12:55:25.013 +01:00 [ERR] Cannot register user with data {"FirstName":"string","LastName":"string","Login":"string","Email":"string","Password":"string","Phone":"string","$type":"RegisterDto"}
2023-01-03 12:55:25.037 +01:00 [INF] HTTP POST /api/Auth/register responded 400 in 2333.5583 ms
2023-01-03 13:17:03.205 +01:00 [WRN] Overriding address(es) 'https://localhost:7039, http://localhost:5110'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2023-01-03 13:17:54.861 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 298.0190 ms
2023-01-03 13:17:55.235 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 134.4609 ms
2023-01-03 13:17:55.686 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 1.7778 ms
2023-01-03 13:17:56.201 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 247.1990 ms
2023-01-03 13:18:05.306 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzQ4Mjg1LCJleHAiOjE2NzI3NTAwODQsImlhdCI6MTY3Mjc0ODI4NSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.h9QnWz_l76XKby5GYLCZEzR7o0BDHouQTjWL939K7qSMEmZvCTRrD2Njs5YC04elWMlGG7f12FpPau2axSMMlg
2023-01-03 13:18:05.407 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 3648.4627 ms
2023-01-03 13:25:14.455 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 373.6449 ms
2023-01-03 13:25:14.800 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 93.8211 ms
2023-01-03 13:25:15.265 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 53.6017 ms
2023-01-03 13:25:15.559 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 197.1810 ms
2023-01-03 13:25:25.426 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzQ4NzI1LCJleHAiOjE2NzI3NTA1MjUsImlhdCI6MTY3Mjc0ODcyNSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.QKz4FL31-tfSwYZzSEMhonTOeJ5OExOHxEujozy-U2mc9ZpT4-QJ8Rif2JyARqd66nbUfLdgcq3_STw0nSJzLQ
2023-01-03 13:25:25.456 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 2202.5981 ms
2023-01-03 13:27:41.900 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 501.9687 ms
2023-01-03 13:27:42.773 +01:00 [ERR] HTTP GET /swagger/v1/swagger.json responded 500 in 44.9693 ms
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - FlatRenting.Controllers.AnnoucementController.GetAllAnnoucements (FlatRenting). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2023-01-03 13:27:42.849 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - FlatRenting.Controllers.AnnoucementController.GetAllAnnoucements (FlatRenting). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-01-03 13:28:14.715 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 306.9605 ms
2023-01-03 13:28:16.896 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 264.6097 ms
2023-01-03 13:28:21.086 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 102.3883 ms
2023-01-03 13:29:02.155 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 3.9694 ms
2023-01-03 13:29:22.090 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzQ4OTYxLCJleHAiOjE2NzI3NTA3NjEsImlhdCI6MTY3Mjc0ODk2MSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.UBub1JdPpCK0sEiQglU6kE12ZoLgJb-4S5tiZh3w9hdtBIlgJNsm22fGHBeX3ektd8Y77ZweaQ1VvP2FwRoHBA
2023-01-03 13:29:22.099 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 2371.9176 ms
2023-01-03 13:29:46.255 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 72.8275 ms
2023-01-03 13:30:26.555 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 320.5495 ms
2023-01-03 13:30:27.648 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 177.4322 ms
2023-01-03 13:30:29.465 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 259.1415 ms
2023-01-03 13:30:33.043 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 4.4374 ms
2023-01-03 13:30:40.608 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 3.7760 ms
2023-01-03 13:30:44.344 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 9.6085 ms
2023-01-03 13:30:50.797 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 0.5345 ms
2023-01-03 13:30:52.635 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 4.0533 ms
2023-01-03 13:30:58.283 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 0.4586 ms
2023-01-03 13:31:03.840 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 2.5739 ms
2023-01-03 13:31:05.621 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 0.5464 ms
2023-01-03 13:31:08.435 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 0.6157 ms
2023-01-03 13:31:10.415 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 0.5801 ms
2023-01-03 13:31:13.795 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 0.7219 ms
2023-01-03 14:11:57.788 +01:00 [FTL] Application terminated unexpectedly
System.InvalidOperationException: 'Invoke' or 'InvokeAsync' does not return an object of type 'Task'.
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.UseMiddleware(IApplicationBuilder app, Type middleware, Object[] args)
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 71
2023-01-03 14:12:48.326 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 260.2213 ms
2023-01-03 14:12:48.640 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 119.7678 ms
2023-01-03 14:12:49.028 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 3.8371 ms
2023-01-03 14:12:49.451 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 203.8158 ms
2023-01-03 14:12:58.105 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 242.6132 ms
2023-01-03 14:13:07.165 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzUxNTg3LCJleHAiOjE2NzI3NTMzODcsImlhdCI6MTY3Mjc1MTU4NywiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.fQYuJADt0nNCOJ6oEz2U-TD5y09qnwPxMTwgVOfuChv9dJdd3FQlnkbkrNy_iL4FO9ej2V74myIywV9HTqOKAA
2023-01-03 14:13:07.176 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 2461.1318 ms
2023-01-03 14:18:40.884 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 702.4935 ms
2023-01-03 14:18:42.509 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 572.0949 ms
2023-01-03 14:20:15.588 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 332.2924 ms
2023-01-03 14:20:16.720 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 239.5395 ms
2023-01-03 14:21:55.280 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 291.6781 ms
2023-01-03 14:21:55.633 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 31.8148 ms
2023-01-03 14:21:56.097 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 13.3914 ms
2023-01-03 14:21:56.486 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 192.8712 ms
2023-01-03 14:39:24.254 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 489.1035 ms
2023-01-03 14:39:24.499 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 47.2386 ms
2023-01-03 14:39:26.136 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 256.8664 ms
2023-01-03 14:41:31.768 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 6.2867 ms
2023-01-03 14:41:59.441 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 4.1290 ms
2023-01-03 14:42:12.202 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 13.0506 ms
2023-01-03 14:44:43.308 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 105.3603 ms
2023-01-03 14:45:22.293 +01:00 [ERR] Cannot save user in HttpContext
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at FlatRenting.Middleware.JwtMiddleware.SaveUserInCtx(HttpContext ctx, IUserRepository userRepository, String token) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 35
2023-01-03 14:45:24.177 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzUzNTI0LCJleHAiOjE2NzI3NTUzMjQsImlhdCI6MTY3Mjc1MzUyNCwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.NTxHqtzHLhTKo6vh2YYByLyyqD7xM-hruRmb0NED8xbwJ4ELSDE3fHIg_xwS05qcA8JoQJigcrfcaw7vFiJmfg
2023-01-03 14:45:24.194 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 2457.8586 ms
2023-01-03 14:45:39.855 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 5.8440 ms
2023-01-03 14:47:42.973 +01:00 [ERR] Cannot save user in HttpContext
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at FlatRenting.Middleware.JwtMiddleware.SaveUserInCtx(HttpContext ctx, IUserRepository userRepository, String token) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 35
2023-01-03 14:47:43.016 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzUzNjYzLCJleHAiOjE2NzI3NTU0NjMsImlhdCI6MTY3Mjc1MzY2MywiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.dPypAo0B5S9kyzL8EfVLata6orauu6vg3F0tTkcYq0Q0oGdxyJdlgIKb0dE0Bq_RZFG_JVRZsQe9l-wEE1Qa5w
2023-01-03 14:47:43.018 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 134.3402 ms
2023-01-03 14:47:46.808 +01:00 [INF] HTTP GET /api/Annoucement responded 401 in 1.4829 ms
2023-01-03 14:49:20.447 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzUzNzYwLCJleHAiOjE2NzI3NTU1NjAsImlhdCI6MTY3Mjc1Mzc2MCwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.FOFjrjTMPEllDwEzul3EeqEk4XfMNnZwjqS09B6ggl0kIJPWsm1vam-ysmUYjBozRIsFOgNK1dDYQRU9vy7_dQ
2023-01-03 14:49:20.457 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 221.5627 ms
2023-01-03 14:49:22.557 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 81.7288 ms
2023-01-03 14:51:12.366 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImI2MGE0ZGUwLTgwMDEtNDE1Yy1iMmQxLTgwYmI3MWU2NmZiMiIsImVtYWlsIjoicG1ha292QGdtYWlsLmNvbSIsIm5iZiI6MTY3Mjc1Mzg3MiwiZXhwIjoxNjcyNzU1NjcyLCJpYXQiOjE2NzI3NTM4NzIsImlzcyI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAiLCJhdWQiOiJodHRwczovL2xvY2FsaG9zdDo4MDgwIn0.4wXOibKKMMiml0qoOndtwXESpXpHyEPEFewPDX1OFrffzJxaIXOtcgNNBp7bgFr_bVMOho9YaaPZJk5NVrYQcw
2023-01-03 14:51:12.380 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 64.9544 ms
2023-01-03 14:51:18.198 +01:00 [INF] HTTP POST /api/Annoucement responded 200 in 263.6780 ms
2023-01-03 14:51:21.063 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 48.9643 ms
2023-01-03 14:51:59.033 +01:00 [INF] HTTP GET /api/Annoucement/f7eaeac5-db08-ae9f-8464-b9ad27a49afa responded 200 in 48.5765 ms
2023-01-03 14:52:15.584 +01:00 [INF] HTTP GET /api/Annoucement/b60a4de0-8001-415c-b2d1-80bb71e66fb2 responded 200 in 45.2667 ms
2023-01-03 14:52:44.204 +01:00 [INF] HTTP GET /api/Annoucement/details/id dolor ipsum labo responded 200 in 37.7372 ms
2023-01-03 14:53:17.436 +01:00 [INF] HTTP POST /api/Annoucement responded 200 in 34.5807 ms
2023-01-03 14:53:25.378 +01:00 [ERR] Cannot login user with data {"Login":"string","Password":"string!","$type":"LoginDto"}
FlatRenting.Exceptions.RepositoryException: Cannot get user with login 'string'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 39
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(String login, String password) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 43
   at FlatRenting.Controllers.AuthController.Login(LoginDto loginDto) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AuthController.cs:line 41
2023-01-03 14:53:25.401 +01:00 [INF] HTTP POST /api/Auth/login responded 400 in 276.6051 ms
2023-01-03 14:53:29.413 +01:00 [ERR] Cannot save user in HttpContext
System.ArgumentException: IDX12741: JWT: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' must have three segments (JWS) or five segments (JWE).
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at FlatRenting.Middleware.JwtMiddleware.SaveUserInCtx(HttpContext ctx, IUserRepository userRepository, String token) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 35
2023-01-03 14:53:29.424 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzU0MDA5LCJleHAiOjE2NzI3NTU4MDksImlhdCI6MTY3Mjc1NDAwOSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.V9C8y0ETuQc3SGCd6-9pWqFxrzDJXizVLuj-24T1hJt5P78FtoHFMM9_-RbClCDccET5jylgNAIns1P_PknAjQ
2023-01-03 14:53:29.428 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 65.4796 ms
2023-01-03 14:54:26.194 +01:00 [INF] HTTP POST /api/Annoucement responded 200 in 139.9908 ms
2023-01-03 14:54:30.630 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 17.3575 ms
2023-01-03 14:54:39.588 +01:00 [INF] HTTP GET /api/Annoucement/b60a4de0-8001-415c-b2d1-80bb71e66fb2 responded 200 in 25.5538 ms
2023-01-03 14:54:47.907 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 15.8539 ms
2023-01-03 14:54:58.503 +01:00 [INF] HTTP GET /api/Annoucement/ade8df72-b0ff-4255-8d3e-6fba56819609 responded 200 in 10.8525 ms
2023-01-03 14:55:03.575 +01:00 [ERR] Cannot get annoucement with Id 'ade8df72-b0ff-4255-8d3e-6fba56819609'
FlatRenting.Exceptions.RepositoryException: Cannot get annoucement with Id 'ade8df72-b0ff-4255-8d3e-6fba56819609'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.AnnoucementRepository.GetAnnoucement(Guid id) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\AnnoucementRepository.cs:line 30
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.AnnoucementRepository.GetAnnoucement(Guid id) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\AnnoucementRepository.cs:line 32
   at FlatRenting.Controllers.AnnoucementController.GetAnnoucement(Guid annoucementId) in D:\Programming\.Net\FlatRenting\FlatRenting\Controllers\AnnoucementController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at FlatRenting.Middleware.JwtMiddleware.InvokeAsync(HttpContext ctx, IUserRepository userRepository) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 14:55:03.593 +01:00 [ERR] HTTP GET /api/Annoucement/details/id dolor ipsum labo responded 500 in 489.1782 ms
2023-01-03 14:55:10.094 +01:00 [INF] HTTP GET /api/Annoucement/ade8df72-b0ff-4255-8d3e-6fba56819609 responded 200 in 17.5086 ms
2023-01-03 14:55:19.866 +01:00 [INF] HTTP GET /api/Annoucement/details/id dolor ipsum labo responded 200 in 6.6171 ms
2023-01-03 14:55:25.738 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 11.6756 ms
2023-01-03 14:55:44.623 +01:00 [INF] HTTP DELETE /api/Annoucement/598ffe34-9847-4778-a005-5c6f530be3cf responded 400 in 15.0548 ms
2023-01-03 14:56:03.973 +01:00 [INF] HTTP PATCH /api/Annoucement/598ffe34-9847-4778-a005-5c6f530be3cf responded 400 in 16.4266 ms
2023-01-03 14:56:10.028 +01:00 [INF] HTTP GET /api/Annoucement/ade8df72-b0ff-4255-8d3e-6fba56819609 responded 200 in 9.6493 ms
2023-01-03 14:56:19.371 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 56.1742 ms
2023-01-03 14:58:32.919 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 256.4168 ms
2023-01-03 14:58:33.075 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 27.1796 ms
2023-01-03 14:58:33.638 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 18.5765 ms
2023-01-03 14:58:34.057 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 280.7157 ms
2023-01-03 14:58:55.893 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 2128.6623 ms
2023-01-03 14:59:25.075 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 370.4900 ms
2023-01-03 15:00:04.267 +01:00 [INF] HTTP GET /api/Annoucement/b60a4de0-8001-415c-b2d1-80bb71e66fb2 responded 200 in 214.4597 ms
2023-01-03 16:43:56.578 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 243.3398 ms
2023-01-03 16:43:56.895 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 152.1762 ms
2023-01-03 16:43:57.311 +01:00 [INF] HTTP GET /swagger/favicon-16x16.png responded 200 in 1.8112 ms
2023-01-03 16:43:57.733 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 218.3070 ms
2023-01-03 16:44:03.168 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 5.1251 ms
2023-01-03 16:44:13.308 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 2238.5929 ms
2023-01-03 16:55:16.426 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 318.4525 ms
2023-01-03 16:55:16.731 +01:00 [INF] HTTP GET /swagger/swagger-ui.css responded 200 in 108.2337 ms
2023-01-03 16:55:17.658 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 272.2987 ms
2023-01-03 16:56:36.053 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 341.5663 ms
2023-01-03 16:56:37.323 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 263.6173 ms
2023-01-03 16:57:03.999 +01:00 [ERR] Cannot save user in HttpContext
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '03.01.2023 14:23:29', Current time: '03.01.2023 15:57:03'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at FlatRenting.Middleware.JwtMiddleware.SaveUserInCtx(HttpContext ctx, IUserRepository userRepository, String token) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 35
2023-01-03 16:57:05.760 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImFkZThkZjcyLWIwZmYtNDI1NS04ZDNlLTZmYmE1NjgxOTYwOSIsImVtYWlsIjoic3RyaW5nIiwibmJmIjoxNjcyNzYxNDI1LCJleHAiOjE2NzI3NjMyMjUsImlhdCI6MTY3Mjc2MTQyNSwiaXNzIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCIsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAifQ.53wnh6pA4Chm-BWjzSLzxP-QY3JAEJov5KyTgpztF7F1TGuA7u6lrM61kAMG12QoPYyxeNPe8JsGMnv0eyC6Cw
2023-01-03 16:57:05.771 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 2288.5053 ms
2023-01-03 16:57:12.406 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 319.6509 ms
2023-01-03 16:57:24.109 +01:00 [INF] HTTP POST /api/comment/520ddb54-f562-47da-9e92-7524390fd673 responded 200 in 285.8343 ms
2023-01-03 16:57:32.946 +01:00 [ERR] A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Id.
System.Text.Json.JsonException: A possible object cycle was detected. This can either be due to a cycle or if the object depth is larger than the maximum allowed depth of 32. Consider using ReferenceHandler.Preserve on JsonSerializerOptions to support cycles. Path: $.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Comments.Annoucement.Id.
   at System.Text.Json.ThrowHelper.ThrowJsonException_SerializerCycleDetected(Int32 maxDepth)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.GetMemberAndWriteJson(Object obj, WriteStack& state, Utf8JsonWriter writer)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryWrite(Utf8JsonWriter writer, T value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.Converters.ListOfTConverter`2.OnWriteResume(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryWrite(Utf8JsonWriter writer, TCollection value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.TryWrite(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCore(Utf8JsonWriter writer, T& value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.Serialization.JsonConverter`1.WriteCoreAsObject(Utf8JsonWriter writer, Object value, JsonSerializerOptions options, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteCore[TValue](Utf8JsonWriter writer, TValue& value, JsonTypeInfo jsonTypeInfo, WriteStack& state)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at System.Text.Json.JsonSerializer.WriteStreamAsync[TValue](Stream utf8Json, TValue value, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter.WriteResponseBodyAsync(OutputFormatterWriteContext context, Encoding selectedEncoding)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at FlatRenting.Middleware.JwtMiddleware.InvokeAsync(HttpContext ctx, IUserRepository userRepository) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 27
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at FlatRenting.Middleware.GlobalExceptionHandlingMiddleware.InvokeAsync(HttpContext ctx) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\GlobalExceptionHandlingMiddleware.cs:line 18
2023-01-03 16:57:33.029 +01:00 [ERR] HTTP GET /api/Annoucement responded 500 in 391.6901 ms
2023-01-03 17:00:02.287 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 54
2023-01-03 17:00:10.322 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 54
2023-01-03 17:00:52.704 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 54
2023-01-03 17:01:12.585 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 54
2023-01-03 17:01:29.742 +01:00 [FTL] Application terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in D:\Programming\.Net\FlatRenting\FlatRenting\Program.cs:line 54
2023-01-03 17:01:59.741 +01:00 [INF] HTTP GET /swagger/index.html responded 200 in 271.7975 ms
2023-01-03 17:02:01.169 +01:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 256.3247 ms
2023-01-03 17:02:16.793 +01:00 [ERR] Cannot save user in HttpContext
FlatRenting.Exceptions.RepositoryException: Cannot get user with Id 'ade8df72-b0ff-4255-8d3e-6fba56819609'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(Guid id) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 28
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(Guid id) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 32
   at FlatRenting.Middleware.JwtMiddleware.SaveUserInCtx(HttpContext ctx, IUserRepository userRepository, String token) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 46
2023-01-03 17:02:17.200 +01:00 [INF] HTTP POST /api/Auth/register responded 200 in 2711.6438 ms
2023-01-03 17:02:44.469 +01:00 [ERR] Cannot save user in HttpContext
FlatRenting.Exceptions.RepositoryException: Cannot get user with Id 'ade8df72-b0ff-4255-8d3e-6fba56819609'
 ---> System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at FlatRenting.Data.Repositories.UserRepository.GetUser(Guid id) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 28
   --- End of inner exception stack trace ---
   at FlatRenting.Data.Repositories.UserRepository.GetUser(Guid id) in D:\Programming\.Net\FlatRenting\FlatRenting\Data\Repositories\UserRepository.cs:line 32
   at FlatRenting.Middleware.JwtMiddleware.SaveUserInCtx(HttpContext ctx, IUserRepository userRepository, String token) in D:\Programming\.Net\FlatRenting\FlatRenting\Middleware\JwtMiddleware.cs:line 46
2023-01-03 17:02:44.518 +01:00 [INF] Token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJJZCI6ImIyM2EwNjRlLWY4NjctNDQzYi1hZjFkLWJkYjk4ZTVlM2JjYiIsImVtYWlsIjoiaW4gdXQgb2NjYWVjYXQiLCJuYmYiOjE2NzI3NjE3NjQsImV4cCI6MTY3Mjc2MzU2NCwiaWF0IjoxNjcyNzYxNzY0LCJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo4MDgwIiwiYXVkIjoiaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MCJ9.AxEA0TBeeBRv3YOtiRRZXoBvYku3QrNFUYExnHAeMx4tY8nlptxXdGzvgGHH0LA359hUXwgV66gl3Ric3q4zxQ
2023-01-03 17:02:44.522 +01:00 [INF] HTTP POST /api/Auth/login responded 200 in 266.0842 ms
2023-01-03 17:02:53.409 +01:00 [INF] HTTP POST /api/Annoucement responded 200 in 204.5583 ms
2023-01-03 17:03:22.934 +01:00 [INF] HTTP POST /api/Annoucement responded 200 in 29.9717 ms
2023-01-03 17:03:26.797 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 169.5535 ms
2023-01-03 17:03:33.342 +01:00 [INF] HTTP POST /api/comment/1e8d62b4-6827-4bce-9a7a-d40145988d93 responded 200 in 81.8232 ms
2023-01-03 17:03:37.090 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 28.5815 ms
2023-01-03 17:03:59.435 +01:00 [INF] HTTP POST /api/comment/1e8d62b4-6827-4bce-9a7a-d40145988d93 responded 200 in 17.0142 ms
2023-01-03 17:04:03.264 +01:00 [INF] HTTP GET /api/Annoucement responded 200 in 8.2095 ms
2023-01-03 17:04:54.377 +01:00 [INF] HTTP GET /api/comment/1e8d62b4-6827-4bce-9a7a-d40145988d93 responded 200 in 27.2780 ms
